# CDev-with-ring-buffer

Модуль circ_cdev.ko собирается командой make в корне репозитория.
После установки модуля в ядро, создастся файл /dev/circ_cdev0.
```
make
sudo insmod circ_cdev.ko
```
При установке пакета write_1.0-0_all.deb, запуcтится сервис systemd, который раз в 30 сек будет записывать текущее время в файл символьного устройства /dev/circ_cdev0.
```
apt install -y ./write_1.0-0_all.deb
```
Скрипт read.sh выполняет команду cat для непрерывного чтения буфера символьного устройства.
```
sudo ./read.sh
```
Также у модуля есть параметр, определяющий размер кольцевого буфера. По умолчанию его значение равняется 16, но его можно изменить при установке модуля:
```
sudo insmod circ_cdev.ko uint circ_buff_size=64
```
Значение параметра circ_buff_size должно быть степенью двойки.